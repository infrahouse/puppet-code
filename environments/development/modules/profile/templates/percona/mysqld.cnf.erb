# Percona Server <%= @percona_series %> configuration
# Managed by Puppet - DO NOT EDIT

[mysqld]
# Unique server identifier
server-id = <%= @server_id %>

# GTID configuration (required for replication)
gtid_mode = ON
enforce_gtid_consistency = ON

# Binary logging (required for replication)
log_bin = mysql-bin
<% if @percona_series == '8.0' -%>
binlog_format = ROW
log_slave_updates = ON
<% end -%>

# Replication settings
relay_log = relay-bin
relay_log_recovery = ON

# Configurable settings (from facts/hiera/defaults)
<% @mysql_config.sort.each do |key, value| -%>
<%= key %> = <%= value %>
<% end -%>